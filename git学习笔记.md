# Git的安装及配置 #

### windows下的Git安装 ###

从 [http://git-scm.com/download/](http://git-scm.com/download/) 下载然后就是傻瓜式安装即可

### Git的本地环境配置 ###

    $ git config --global "huzaixing123456"
  
    $ git config --global "252174621@qq.com"
    
因为Git是分布式版本控制系统，所以，每个机器都必须自报家门：你的 **名字** 和 **Email** 地址。

**注意** : git config命令的--global参数，用了这个参数，表示你这台机器上所有的Git仓库都会使用这个配置，当然也可以对某个仓库指定不同的用
户名和Email地址。

# github网站 #

在Git中并不存在主库的概念，每一份复制出的库都可以独立使用。但是的开发的过程中，确实需要一台中央服务器作为各协同工作之间交换的枢纽，其实完全可以自己搭建一个Git服务器，但是现阶段已经有了这样一个免费的git仓库托管服务的平台，这既是github网站，只需要注册一个github账号，就可以免费获得Git远程仓库。

### github配置 ###

由于本地Git仓库和GitHub仓库之间的传输是通过SSH加密的，所以，需要一点 **设置**：

第1步：**创建SSH Key**。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有id_rsa和id_rsa.pub这两个文件，如果已经有了，可直接跳到下一步。如果没有，打开Shell（Windows下打开Git Bash），创建SSH Key。

    $ ssh-keygen -t rsa -C "252174621@qq.com"

第2步：登陆GitHub，打开“Account settings”，“SSH Keys”页面：然后，点“Add SSH key”，填上任意的title，在key文本框里面粘贴id_rsa.pub的
内容，点“Add Key”，你就应该看到已经添加的Key。

**为什么GitHub需要SSH Key呢** : 因为GitHub需要识别出你推送的提交确实是你推送的，而不是别人冒充的，而Git支持SSH协议，所以，GitHub只要知道了你的公钥，就可以确认只有你自己才能推送。

# git的常用命令 #

### 创建版本库 ###

选择一个合适的目录，通过以下命令将该目录变成Git可管理的仓库

    git init
    
Git就把仓库建好了，并且是一个空的仓库，当前目录下会有一个.git的目录，这个目录是Git来跟踪管理版本库的，没事千万不要手动修改这个目录里面的文件，不然改乱了，就把Git仓库给破坏了。   
    
### 提交文件 ###

第一步：使用git add命令，将要提交的文件添加到仓库暂存区

    git add hzx.txt
    
（暂存区概念：我理解的暂存区是git中开辟的一块独立的奇特区域，类似于我们常说的缓冲区，有了暂存区，工作区间与版本库之间就不在直接打交道，而是通过暂存区连接起来，这样做的好处，我总结为：可以灵活操作，比如，同时修改了几个文件，但是其中一个不想提交的话，那么git add的意义就来了，另外当一个功能还未完成，却要切换分支修改其他bug时，此时的工作去又不想提交，那么也是可以存到暂存区的。）    
    
第二步：使用git commit命令将文件提交到本地仓库

    git commit -m "本次提交说明"
    
-m后面输入的是本次提交的说明，可以不输入任何内容，但是为了更好的协同工作，以及后期版本的调整，写入一些有意义的文字描述是必须的。

第三步：使用git push将代码推送到远端

    git push origin master

origin是远程库的默认名，master是要推送的分支。    

### 版本回退 ###

查看提交记录

    git log

每次提交都会产生一个commit id，Git的commit id是一个SHA1计算出来的一个非常大的数字，用十六进制表示，只要找到commit id，就可以任意穿梭于各个版本之间。（git log显示的commit id最上面的是最新的版本，一般显示前几个，需要按enter键查看所有，另外退出git log按q即可）

会退到指定版本

    git reset --hard d458hyd(commit id)
    
其中的commit id可以只写最前面的七位，Git会自动匹配。当然会退到某一个版本还有快捷的指令，如下：    

    git reset --hard HEAD^(会退到上一个版本)
    git reset --hard HEAD^^(会退到上上个版本)
    git reset --hard HEAD~100(会退到上一百个版本)
    
未来版本

    git reflog
    
有时候回退到某一个版本时想更新到未来版本，但是git log是查不到的，可以用此指令查看全部的操作日志，找到commit id。    
    
### 管理修改 ###

+ 查看文件状态

    git status
    
+ 查看文件详细修改内容

    git diff HEAD -- hzx.txt
    
### 撤销修改 ###

    git checkout -- hzx.txt
    
+ 第一种情况：文件修改后还未放进暂存区，此时撤销，就会回退到没做修改之前的状态
+ 第二种情况：文件修改后已经放进暂存区，此时又做了修改，撤销的话会回到增加到缓存区的状态
+ 另外注意，如果提交到暂存区后没做任何修改，此时回退没有效果。再想做版本只能通过commit id了;checkout后面一定个要有--，要不然就成为分支切换了;刚删除的文件也可以用此方式恢复文件。

### 删除文件 ###

    git rm hzx.txt(删除指定的文件)
    git commit -m "提交说明"（将删除文件的记录提交到本地仓库，注意，前面无须add到暂存区了）
    
# 分支管理 #

几乎每一种版本控制系统都以某种形式支持分支，在项目开发的过程中，分支之间的切换是一件非常普遍的事情，从原理上说：分支本质上其实就是一个指向某次提交的可变指针。我所理解的分支其实就是一个clone出来的副本，主体与副本时间是平行互不影响的，可以在副本上做任何其他操作，然后合并到主体上，例如，一般的项目，有个上线的主分支，用在在开发完成之后，合并代码上线，另外还有一个开发人员使用的开发分支、测试人员使用的测试分支以及修复bug的分支。Git 的分支可谓是难以置信的轻量级，它的新建操作几乎可以在瞬间完成，并且在不同分支间切换起来也差不多一样快。和许多其他版本控制系统不同，Git 鼓励在工作流程中频繁使用分支与合并，哪怕一天之内进行许多次都没有关系。

### 创建分支 ###

    git branch (查看分支)
    git branch hzx (创建分支hzx)
    git checkout hzx （切换到hzx分支）
    git checkout -b hzx （创建分支hzx，并且切换到hzx分支 -b表示创建并切换）
    
### 合并 ###

切换到要合并到的分支，比如将hzx合并到master，则先切到master分支。

    git merge hzx
    
fast forward模式，这是进行快速合并，此种方式合并仅仅是将master指向hzx分支的当前提交。

    git merge --no-ff -m "合并说明" hzx
    
--no-ff表示禁用fast forward模式，此种方式合并代码两个分支之间才是真正的代码合并，并且合并后的历史有分支，看得出来曾经做过合并。
    
### 删除分支 ###

    git branch -d hzx
    git branch -D hzx
    
### bug分支 ###

在Git中，由于分支是如此的强大，每个BUG都可以通过一个新的临时分支来修复，一般情况下，一个bug的修复过程大概是：**切换bug分支-修复bug-合并分支-bug分支删除**。有时候接到临时任务，紧急修复某一个BUG，但是你在dev上正在进行的开发工作还没有完成，不方便提交，以免影响其它小伙伴，此时可以将dev上的已进行的工作进行储藏，等以后恢复现场后继续工作。（如果不储藏，此时切换到另外一个bug分支的话，那么已经完成的那一部分代码将丢失）

    git stash (当前分支还未提交的文件进行储藏)
    git stash list (查看当前分支储藏列表)
    git stash apply (恢复储藏的内容，但是stash并不删除，可用git stash drop删除)
    git stash pop (恢复储藏的内容，并且将stash删除)
    
### 分支的其他操作 ###

注意：clone代码的时候，只有master分支，其他分支是不会clone下来的，所以想要想要创建远程的dev分支到本地：

    git checkout -b dev origin/dev
    
另外也可以通过命令行在本地创建与服务器上相对应的分支名，执行命令，建立本地与远程的分支连接：    

    git branch --set-upstream dev origin/dev；
    
# 冲突解决 #

不管用什么版本管理工具，只要多人协同工作，就一定会存在冲突，冲突的产生无外乎，多个人同时修改了某一个文件的某一段代码，那么此时，要如何取舍，版本管理工具当然不能判定那个是需要留下来的，此时，需要人工操作，但是git也会给出友好提示。

    $ git stash apply
    Auto-merging reset.txt
    CONFLICT (content): Merge conflict in reset.txt
    
此时就可以定位到冲突的文件，进行人工修复，并再次提交，一般冲突我遇到有两种，一种是同事修改了某一个文件，并且已经提交，你在本地也已经修改此文件，当你拉取服务器上文件时，冲突就产生了。另外一种就是合并分支的时候，开发分支上有添加了代码，但是切换出去的分支上也改了此次代码，合并时问题也会产生。    
    


